<?xml version="1.0" encoding="utf-8" ?>
<odoo>
   <record id="crm_case_form_view_oppor_inherit_product" model="ir.ui.view">
        <field name="name">crm.lead.oppor.inherited</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form" />
        <field name="arch" type="xml">

        	 <xpath expr="//group/group[5]" position="replace">
        	 	<group>
                                <field name="user_id" domain="[('share', '=', False)]" string="Mentor"
                                    context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'sales_team.group_sale_salesman_all_leads'], 'team_id': team_id}"/>
                                <field name="team_id" widget="selection"
                                    domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]"/>
                                <field name="type" invisible="1"/>
                            </group>

                

                </xpath>
                

            <xpath expr="//group/group[2]" position="replace">
            <group attrs="{'invisible': [('type', '=', 'lead')]}">
                                <field name="partner_id"
                                    widget="res_partner_many2one"
                                    string="Propietario"
                                    context="{'res_partner_search_mode': type == 'opportunity' and 'customer' or False,
                                        'default_name': contact_name or partner_name,
                                        'default_street': street,
                                        'default_is_company': type == 'opportunity' and contact_name == False,
                                        'default_company_name': type == 'opportunity' and partner_name,
                                        'default_street2': street2,
                                        'default_city': city,
                                        'default_title': title,
                                        'default_state_id': state_id,
                                        'default_zip': zip,
                                        'default_country_id': country_id,
                                        'default_function': function,
                                        'default_phone': phone,
                                        'default_mobile': mobile,
                                        'default_email': email_from,
                                        'default_user_id': user_id,
                                        'default_team_id': team_id,
                                        'default_website': website,
                                        'show_vat': True,
                                    }"
                                />
                                <field name="is_blacklisted" invisible="1"/>
                                <field name="partner_is_blacklisted" invisible="1"/>
                                <field name="email_state" invisible="1"/>
                                <field name="phone_state" invisible="1"/>
                                <label for="email_from" class="oe_inline"/>
                                <div class="o_row o_row_readonly">
                                    <i class="fa fa-ban" style="color: red;" role="img" title="This email is blacklisted for mass mailing"
                                        aria-label="Blacklisted" attrs="{'invisible': ['|', ('is_blacklisted', '=', False), ('partner_address_email', '!=', False)]}" groups="base.group_user"/>
                                    <field name="email_from"
                                        attrs="{'invisible': [('partner_address_email', '!=', False)]}" string="Email" widget="email"/>
                                    <i class="fa fa-ban" style="color: red;" role="img" title="This email is blacklisted for mass mailing"
                                        aria-label="Blacklisted" attrs="{'invisible': ['|', ('partner_is_blacklisted', '=', False), ('partner_address_email', '=', False)]}" groups="base.group_user"/>
                                    <field name="partner_address_email"
                                        attrs="{'invisible': [('partner_address_email', '==', False)]}" widget="email" string="Email"/>
                                </div>
                                <field string="Phone"
                                    name="partner_address_phone"
                                    widget="phone" options="{'enable_sms': True}"
                                    readonly="1"
                                    attrs="{'invisible': [('partner_address_phone', '==', False)]}"/>
                                <field name="mobile"
                                    widget="phone" options="{'enable_sms': True}"
                                    attrs="{'invisible':  [('partner_address_phone', '!=', False)]}"/>
                            </group>
                      </xpath>

            <!-- Reemplazar la Pestaña de CRM por la encuenta de Registro -->

            <xpath expr="//page[@name='lead']" position="replace">
                <page string="Módulo 1">
                    <group>
                        <field name="x_datos1" />
                    </group>
                    <group string="MÓDULO 1 - REGISTRO" style="line-height: 10px;">
                        <group>
                            <field name="x_nombre_negocio" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_nombre" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>                
                            <field name="doctype" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="xidentification" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_sexo" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_etnia" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_edad" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                             <field name="country_id" attrs=
                              "{'invisible': ['|','|',('x_datos1','=','51'),('x_datos1','=',False),('x_datos1','=','50')]}"/>
                            <field name="state_id" string="Departamento de Residencia" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="xcity" string="Municipio de Recidencia" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_vereda" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="mobile" string="Teléfono Celular" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="email_from" attrs="{'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_limitacion" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_escolaridad" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <!--field name="x_cual"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_escolaridad', '!=', '34')],}"        
                                   />
                            <field name="x_cual"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_escolaridad', '!=', '35')],}"        
                                   />
                            <field name="x_cual"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_escolaridad', '!=', '36')],}"        
                                   /-->
                        </group>

                        <group>                            
                            <field name="x_grupos" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_grupos_cual"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_grupos', '!=', '40')],'required': [('x_datos1','=','50'),('x_grupos', '=', '40')]}"        
                                   />
                            <field name="x_estrato" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_situacion" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_sector" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_actcomer" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_state_id" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_city_id" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_ubic" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                            <field name="x_com_cuenta" attrs=
                              "{'required': [('x_datos1','=','50')], 'invisible': ['|',('x_datos1','=','51'),('x_datos1','=',False)]}"/>
                        </group>
                    </group>

                   
                </page>

                <page string="Módulo 2">

                 <group string="MÓDULO 2 - PARTICIPACIÓN">
                       <field name="x_cont1" />              
                    </group>
                </page>

                <page string="Módulo 3">
                    <group> 
                        <field name="x_datos3" />
                    </group>
                    <group string="MÓDULO 3 - CARACTERIZACIÓN " style="line-height: 30px;">
                       
                    <group>
                    
                    <field name="x_sisben" />
                    <field name="x_tsisben"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_sisben', '!=', '50')],}"        
                                   />
                    <field name="x_nsisben"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_sisben', '!=', '50')],}"        
                                   />
                    <field name="x_tactiv" />
                    <field name="x_tactiv_anos"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_tactiv', '!=', '51')],}"        
                                   />
                    <field name="x_horas_trab" />
                    <field name="x_cotiza" />
                    <field name="x_motivo" />
                    <field name="x_sitio_ubi" />
                    <field name="x_microneg" />
                    <field name="x_desc_act" />
                    <field name="x_desc_act_sec" />
                    <field name="x_microneg" />
                    <field name="x_desc_act" />
                    <field name="x_desc_act_sec" />
                    <field name="x_merca" />
                    <field name="x_merca_tipo"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_microneg', '!=', '50')],}"        
                                   />
                    </group>

                    <group>
                    <field name="x_fabric" />
                    <field name="x_fabric_si"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_fabric', '!=', '50')],}"        
                                   />
                    <field name="x_servicios" />
                    <field name="x_ambula" />
                    <field name="x_ambula_2" />
                    <field name="x_ambula_cual"
                                   options="{'no_open': False}"
                                   attrs="{
                                   'invisible':[('x_ambula_2', '!=', '57')],}"        
                                   />
                    <field name="x_mprima" />
                    <field name="x_clientes" />
                    <field name="x_problema" />
                    <field name="x_familia" />
                    <field name="x_reinvierte" />
                    

                    </group>

                    </group> 

                </page>
            </xpath>
        </field>
    </record>


    <record id="view_search_crm_inherited" model="ir.ui.view">
            <field name="name">Search - extension</field>
                <field name="model">crm.lead</field>
                <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
                <field name="arch" type="xml">
                    <field name="name" position="replace">
                       <field name="name" string="Propietario" filter_domain="[
                        '|', '|', '|', '|',
                        ('partner_id', 'ilike', self),
                        ('x_nombre_negocio', 'ilike', self),
                        ('email_from', 'ilike', self),
                        ('name', 'ilike', self),
                        ('xidentification', 'ilike', self)]"/>
                    </field>
            </field>
    </record>
</odoo>